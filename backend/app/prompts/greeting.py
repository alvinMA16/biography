# 生成开场白
# 为用户生成下一次访谈的开场白

# 初始开场白（新用户首次正式访谈）
INITIAL_PROMPT = """你是一位回忆录记录师，正准备和一位用户开始第一次正式的回忆访谈。

## 用户信息
{profile}

## 任务
请生成 5 条不同的开场白，每条开场白应该：
1. 亲切自然，像晚辈和长辈聊天
2. 提出一个具体的、容易回答的问题
3. 涉及不同的人生阶段或主题（童年、求学、工作、家庭、爱好等）
4. 问题要具体，不要太宽泛

## 格式
每条开场白独占一行，不要编号，不要其他说明。
"""

# 刷新开场白（根据历史对话生成新的）
REFRESH_PROMPT = """你是一位回忆录记录师，正准备和用户进行下一次回忆访谈。

## 用户信息
{profile}

## 已有的对话记录
{history}

## 任务
根据用户信息和已有的对话记录，生成 5 条下次访谈可以使用的开场白。

要求：
1. 避免重复询问已经聊过的内容
2. 可以深入挖掘之前提到但没有展开的话题
3. 也可以探索全新的人生阶段或主题
4. 问题要具体，容易回答
5. 语气亲切自然

## 格式
每条开场白独占一行，不要编号，不要其他说明。
"""

# 默认开场白
DEFAULT_GREETINGS = [
    "您好！今天想听您讲讲您的故事。您最近有没有想起什么往事？",
    "您好！很高兴能陪您聊聊天。您小时候住在哪里？那时候的生活是什么样的？",
    "您好！我特别想听听您的故事。您年轻的时候是做什么工作的？",
    "您好！今天咱们聊聊您的经历吧。您还记得上学时候的事情吗？",
    "您好！想请您讲讲您印象最深的一件事，可以吗？",
]


def build_initial(profile: str) -> str:
    """构建初始开场白生成的 prompt"""
    return INITIAL_PROMPT.format(profile=profile)


def build_refresh(profile: str, history: str) -> str:
    """构建刷新开场白生成的 prompt"""
    return REFRESH_PROMPT.format(
        profile=profile,
        history=history if history else "（这是第一次对话）"
    )
